"use strict";function getCommentsRequest(){wrapper.innerHTML="Загрузка...";var e=new XMLHttpRequest;e.open("GET",serverUrl+"comments",!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&(200!=e.status?console.error(e.status+": "+e.statusText):(wrapper.innerHTML="",comments=JSON.parse(e.responseText),addComments(comments)))}}function addComments(e){for(var t=e.length-1;t>=0;t--){var n=createCommentTemplate(e[t]),d=document.createElement("div");d.innerHTML=n,wrapper.appendChild(d)}}function createCommentTemplate(e){var t='<div class="panel panel-default" id="comment-'+e.id+'">\n	      <div class="panel-heading">\n	        <div class="row">\n	          <div class="col-sm-6">\n	            <h3 class="panel-title">'+e.name+" ("+e.email+')</h3>\n	          </div>\n	          <div class="col-sm-6">\n	            <h5 class="panel-title add-date"><span class="admin-edit">'+isEdited(e.is_edited)+"</span> "+e.create_time+'</h5>\n	          </div>\n	        </div>\n	      </div>\n	      <div class="panel-body" onclick="startEditText(\''+e.id+'\')" id="text-'+e.id+'">'+e.text+"</div>\n	    </div>";return t}function isEdited(e){return 1==e?"изменен администратором":""}function editCommentTemplate(e,t){var n='<div class="panel-body">\n			<textarea class="form-control" id="newText" rows="3" placeholder="newText" >'+t+'</textarea>\n			<p>\n			<div class="form-inline">\n	    		<button class="btn btn-default" id="saveNewTextBtn" onclick="updateCommentsRequest(\''+e+'\')">Сохранить</button>\n	      		<button class="btn btn-default" id="cancelNewTextBtn" onclick="cancelEditText()">Отмена</button>\n      		</div>\n		</div>';return n}function startEditText(e){if(!updateCommentsProc){null!=currentId&&cancelEditText(currentId),currentId=e;var t=document.getElementById("text-"+currentId),n=document.createElement("div");n.innerHTML=editCommentTemplate(currentId,t.innerHTML),t.style.display="none",t.parentNode.appendChild(n)}}function cancelEditText(){var e=document.getElementById("text-"+currentId);e.style.display="block",e.parentNode.lastChild.remove(),currentId=null}function saveEditText(e){var t=document.getElementById("text-"+e),n=document.getElementById("newText").value;updateCommentsRequest(e,n)&&(t.innerHTML=n),t.style.display="block",t.parentNode.lastChild.remove()}function updateCommentsRequest(e){disableEditTextBlock(),updateCommentsProc=!0;var t=document.getElementById("text-"+e),n=document.getElementById("newText").value,d=new XMLHttpRequest,a=JSON.stringify({id:e,newText:n});console.log(a),d.open("PUT",serverUrl+"comments",!0),d.send(a),d.onreadystatechange=function(){if(4==d.readyState){if(200!=d.status)console.error(d.status+": "+d.statusText);else{var e=JSON.parse(d.responseText);console.log(e.status),e.status&&(currentId=null,t.innerHTML=n,t.style.display="block",t.parentNode.lastChild.remove())}updateCommentsProc=!1}}}function disableEditTextBlock(){document.getElementById("newText").disabled=!0,document.getElementById("saveNewTextBtn").disabled=!0,document.getElementById("cancelNewTextBtn").disabled=!0}function enableEditTextBlock(){document.getElementById("newText").disabled=!1,document.getElementById("saveNewTextBtn").disabled=!1,document.getElementById("cancelNewTextBtn").disabled=!1}function getFormData(){var e=document.forms.feedback;e.elements.inputName,e.elements.inputEmail,e.elements.inputText,e.elements.inputFile}document.addEventListener("DOMContentLoaded",getCommentsRequest);var serverUrl="http://93.88.210.4:8080/api/",wrapper=document.getElementById("wrapper"),comments=[],currentId=null,updateCommentsProc=!1;
//# sourceMappingURL=main.min.js.map
