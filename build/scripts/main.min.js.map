{"version":3,"sources":["scripts/main.js"],"names":["getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","getCommentsRequest","wrapper","innerHTML","XHR","XMLHttpRequest","XDomainRequest","xhr","withCredentials","open","SERVER_URL","send","onreadystatechange","readyState","status","console","error","statusText","response","JSON","parse","responseText","user","login","showHideAuthForm","isadmin","comments","data","renderAllComments","i","length","newComment","createElement","className","setAttribute","commentTemplate","createCommentTemplate","thumb","src","getElementsByTagName","appendChild","parentNode","classList","add","newFooter","footerTemplate","createFooterTemplate","comment","html","ismoderatedBtnClass","is_moderated","id","email","isEdited","is_edited","create_time","text","openImageModal","img","img_path","getElementById","split","modalImageBlock","firstChild","removeChild","footerComment","option","ismoderatedBtnCheck","changeModerateState","stringify","result","editCommentTemplate","startEditText","updateCommentsProc","currentId","cancelEditText","style","display","currentEditBlock","lastChild","currentText","remove","saveEditText","newText","value","updateCommentsRequest","disableEditTextBlock","disabled","enableEditTextBlock","getFormData","form","forms","feedback","elements","inputName","inputEmail","inputText","inputFile","clearFormData","preview","validate","Date","toLocaleString","preveiwComment","files","cancelPreview","addCommentRequest","file","upload","onprogress","event","formData","FormData","append","cancelImage","getSigninFormData","signin","credential","inputSigninLogin","password","inputSigninPassword","signIn","session_id","alert","signOut","userName","removeErrorClass","el","removeAllErrorClass","getElementsByClassName","check","regex_name","regex_email","exec","addEventListener","getFile","click","sortComments","COMPARE_TYPE","getCompareType","chevron","sort","compareUp","compareDown","type","a","b","selectedFile","target","reader","FileReader","onload","readAsDataURL"],"mappings":"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","file":"scripts/main.min.js","sourcesContent":["\"use strict\";\n\n// когда страница (DOM-дерево) полностью загружена, получаем комментарии с сервера getCommentsRequest()\ndocument.addEventListener(\"DOMContentLoaded\", getCommentsRequest);\n\n// бэкенд сервер url:\nvar SERVER_URL = 'https://mona-test.herokuapp.com/';\n// var SERVER_URL = 'http://93.88.210.4:8080/';\n// var SERVER_URL = 'http://93.88.210.4/';\n\n// блок в который будут добавлены загруженные с сервера комментарии\nvar wrapper = document.getElementById(\"wrapper\");\n\nvar comments = [];\nvar currentId = null;\nvar updateCommentsProc = false;\nvar user = {\n\tlogin: getCookie(\"userName\") || \"\",\n\tisadmin: false,\n\tsession_id: \"\"\n}\nvar COMPARE_TYPE = \"create_type\";\n\n// показываем/скрываем форму ввода пароля\nshowHideAuthForm(user.login);\n\n// возвращает cookie с именем name, если есть, если нет, то undefined\nfunction getCookie(name) {\n  var matches = document.cookie.match(new RegExp(\n    \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n  ));\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\n// функция получения комментариев с сервера\nfunction getCommentsRequest(){\n\twrapper.innerHTML = \"Загрузка...\";\n\t// var xhr = new XMLHttpRequest();\n\tvar XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;//поддержка ie8-9\n\tvar xhr = new XHR();\n\txhr.withCredentials = true;\n\txhr.open('GET', SERVER_URL+'api/comments', true);//true - асинхронно\n\txhr.send();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4){//отправка данных завершена\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.status != 200) {\n\t\t  console.error( xhr.status + ': ' + xhr.statusText );\n\t\t} else {\n\t\t\tvar response = JSON.parse(xhr.responseText);\n\n\t\t\tif(response.status){\n\t\t\t\tuser.login = response.login;\n\t\t\t\tif(!user.login){showHideAuthForm(\"\");}\n\t\t\t\tuser.isadmin = response.isadmin;\n\t\t\t\tcomments = JSON.parse(response.data);\n\n\t\t\t\t//добавляем комментарии на страницу\n\t\t\t\trenderAllComments(comments, response.isadmin);\n\t\t\t}\t\t  \n\t\t}\n\t}\n}\n\n// функция добавления комментариев\nfunction renderAllComments(comments){\n\twrapper.innerHTML = \"\";\n\tfor (var i = comments.length - 1; i >= 0; i--) {\n\n\t\t// создаем html-блок комментария по шаблону\n\t\tvar newComment = document.createElement(\"div\");\n\t\tnewComment.className = \"panel panel-default\";\n\t\tnewComment.setAttribute(\"id\", \"comment-\"+comments[i]['id']);\n\t\tvar commentTemplate = createCommentTemplate(comments[i]);\n\t \tnewComment.innerHTML = commentTemplate;\n\n\t \t// добавляем картинку (миниатюру), если есть\n\t \tif(comments[i]['image'] != null){\n\t \t\tvar thumb = document.createElement(\"img\");\n\t \t\tthumb.className = \"media-object\";\n\t \t\tthumb.src = SERVER_URL+\"uploads/\"+comments[i]['image']+\"_min\";\n\t \t\t// var thumb = createThumbTemplate(comments[i]);\n\t \t\tnewComment.getElementsByTagName(\"a\")[0].appendChild(thumb);\n\t \t\tnewComment.getElementsByTagName(\"a\")[0].parentNode.classList.add(\"border\");\n\t \t}\n\n\t \t// создаем футер html-блока по шаблону (кнопки принять/отклонить)\n\t \tif(user.isadmin){\n\t \t\tvar newFooter = document.createElement(\"div\");\n\t \t\tnewFooter.className = \"panel-footer text-right\";\n\t \t\tnewFooter.setAttribute(\"id\", \"footer-\"+comments[i]['id']);\n\t \t\tvar footerTemplate = createFooterTemplate(comments[i]);\n\t \t\tnewFooter.innerHTML = footerTemplate;\n\t \t\tnewComment.appendChild(newFooter);\n\t \t}\n\n\t \t// добавляем созданый html-блок с комментарием на страницу\n\t\twrapper.appendChild(newComment);\n\t};\n}\n\n// шаблон футера коментария\nfunction createFooterTemplate(comment){\n\tvar html =\n\t `\n\t\t<div class=\"btn-group\" data-toggle=\"buttons\" >\n\t\t  <label class=\"btn btn-default btn-xs `+ismoderatedBtnClass(comment.is_moderated, 1)+`\" onclick=\"changeModerateState(`+comment.id+`, 1)\" >\n\t\t    <input type=\"radio\" name=\"options-`+comment.id+`\" id=\"option1-`+comment.id+`\" > принять\n\t\t  </label>\n\t\t  <label class=\"btn btn-default btn-xs `+ismoderatedBtnClass(comment.is_moderated, 2)+`\" onclick=\"changeModerateState(`+comment.id+`, 0)\">\n\t\t    <input type=\"radio\" name=\"options-`+comment.id+`\" id=\"option2-`+comment.id+`\" > отклонить\n\t\t  </label>\n\t\t</div>`\n\t;\n\treturn html;\n}\n// функция создания html-блока комментария\nfunction createCommentTemplate(comment){\n\tvar html = \n\t\t `<div class=\"panel-heading\">\n\t        <div class=\"row\">\n\t          <div class=\"col-sm-6\">\n\t            <h3 class=\"panel-title\"><b>`+comment.name+`</b> (`+comment.email+`)</h3>\n\t          </div>\n\t          <div class=\"col-sm-6\">\n\t            <h5 class=\"panel-title add-date\"><span class=\"admin-edit\" id=\"isedited-`+comment.id+`\">`+isEdited(comment.is_edited)+`</span> `+comment.create_time+`</h5>\n\t          </div>\n\t        </div>\n\t      </div>\n\t      <div class=\"panel-body\" >\n\t      \n\t      \t  <div class=\"media\">\n\t\t        <pre class=\"media-body\" onclick=\"startEditText('`+comment.id+`')\" id=\"text-`+comment.id+`\">`+comment.text+`</pre>\n\t\t        <div class=\"media-right media-top thumbnail-min\">\n\t\t          <a href=\"#\" onclick=\"openImageModal('`+comment.id+`')\" data-toggle=\"modal\" data-target=\"#modalImage\">\n\t\t            \n\t\t          </a>\n\t\t        </div>\n\t\t      </div>\n\n\t      </div>\n\t      `\n\t;\n\treturn html;\n}\n\n//функция генерации модального окна с картинкой\nfunction openImageModal(id){\n\tvar img = document.createElement(\"img\");\n\timg.className = \"thumbnail-full\";\n\tvar img_path = document.getElementById(\"comment-\"+id).getElementsByTagName(\"img\")[0].src;\n\timg.src = img_path.split(\"_\")[0];\n\n\tvar modalImageBlock = document.getElementById(\"modalImageBlock\");\n\twhile (modalImageBlock.firstChild) {\n\t    modalImageBlock.removeChild(modalImageBlock.firstChild);\n\t}\n\tmodalImageBlock.appendChild(img);\n}\n\n// функция проверки на изменения комметария администратором\nfunction isEdited(is_edited){\n\tif(is_edited == 1){\n\t\treturn \"изменен администратором\";\n\t}\n\treturn \"\";\n}\nfunction footerComment(){\n\tif(user.isadmin){\n\t\treturn \"block\";\n\t}\n\treturn \"none\";\n}\nfunction ismoderatedBtnClass(is_moderated, option){\n\tif(is_moderated == 1 && option == 1){\n\t\treturn \"active\";\n\t}\n\tif(is_moderated == 0 && option == 2){\n\t\treturn \"active\";\n\t}\n\treturn \"\";\n}\nfunction ismoderatedBtnCheck(is_moderated, option){\n\tif(is_moderated == 1 && option == 1){\n\t\treturn \"checked=true\";\n\t}\n\tif(is_moderated == 0 && option == 2){\n\t\treturn \"checked=true\";\n\t}\n\treturn \"\";\n}\n\n// функция изменения статуса комментария (принять/отклонить)\nfunction changeModerateState(id, is_moderated){\n\tvar data = JSON.stringify({\n  \t\t\t\t\t\tid: id,\n\t\t\t\t\t\tis_moderated: is_moderated\n\t\t});\n\tvar XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n\tvar xhr = new XHR();\n\txhr.withCredentials = true;\n\txhr.open('PUT', SERVER_URL+'api/moderate', true);\n\txhr.send(data);\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4){\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.status != 200) {\n\t\t  console.error( xhr.status + ': ' + xhr.statusText );\n\t\t} else {\n\t\t\tvar result = JSON.parse( xhr.responseText );\n\t\t\tif( result.status ){\n\t\t\t\t// console.log(\"changed\");\n\t\t\t}\n\t\t}\n\t}\n}\n\n// генерация шаблона редактирования, выбранного комментария\nfunction editCommentTemplate(id, text){\n\tvar html = \n\t\t`<div class=\"panel-body\">\n\t\t\t<textarea class=\"form-control\" id=\"newText\" rows=\"3\" placeholder=\"Текст\" >`+text+`</textarea>\n\t\t\t<p>\n\t\t\t<div class=\"form-inline\" style=\"text-align: right;\">\n\t    \t\t<button class=\"btn btn-default\" id=\"saveNewTextBtn\" onclick=\"updateCommentsRequest('`+id+`')\">Сохранить</button>\n\t      \t\t<button class=\"btn btn-default\" id=\"cancelNewTextBtn\" onclick=\"cancelEditText()\">Отмена</button>\n      \t\t</div>\n\t\t</div>`\n\t;\n\treturn html;\n}\n\n// инициализация редактирования комментария\nfunction startEditText(id){\n\tif(!user.isadmin){return;}\n\tif(id === \"preview\"){return;}\n\tif(updateCommentsProc){return;}\n\tif(currentId != null){\n\t\tcancelEditText( currentId );\n\t}\n\tcurrentId = id;\t\t\n\t\n\tvar text = document.getElementById(\"text-\"+currentId);\n\ttext.parentNode.parentNode.style.display=\"none\";//hide current text (<div class=\"panel-body\">)\n\t\n\tvar currentEditBlock = document.createElement(\"div\");\n\tcurrentEditBlock.innerHTML = editCommentTemplate(currentId, text.innerHTML);\n\ttext.parentNode.parentNode.parentNode.lastChild.style.display=\"none\";// hide footer (<div class=\"panel-footer\">)\n\ttext.parentNode.parentNode.parentNode.appendChild( currentEditBlock );//add edit textarea\n}\n\nfunction cancelEditText(){\n\tvar currentText = document.getElementById(\"text-\"+currentId);\n\tcurrentText.parentNode.parentNode.style.display=\"block\";\n\tcurrentText.parentNode.parentNode.parentNode.lastChild.remove();\n\tcurrentText.parentNode.parentNode.parentNode.lastChild.style.display=\"block\";\n\t\n\tcurrentId = null;\n}\n\nfunction saveEditText(id){\n\tvar currentText = document.getElementById(\"text-\"+id);\n\tvar newText = document.getElementById(\"newText\").value;\n\t// alert(\"alert: \"+updateCommentsRequest(id, newText));\n\tif( updateCommentsRequest(id, newText) ){\n\t\tcurrentText.innerHTML = newText;\n\t}\n\tcurrentText.style.display=\"block\";\n\tcurrentText.parentNode.lastChild.remove();\n}\n\n// функция изменения комментария на сервере\nfunction updateCommentsRequest(id){\n\tdisableEditTextBlock();\n\tupdateCommentsProc = true;\n\n\tvar currentText = document.getElementById(\"text-\"+id);\n\tvar newText = document.getElementById(\"newText\").value;\n\n\tvar data = JSON.stringify({\n  \t\t\t\t\t\tid: id,\n\t\t\t\t\t\tnewText: newText\n\t\t});\n\tvar XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n\tvar xhr = new XHR();\n\txhr.withCredentials = true;\n\txhr.open('PUT', SERVER_URL+'api/comments', true);\n\txhr.send(data);\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4){\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.status != 200) {\n\t\t  console.error( xhr.status + ': ' + xhr.statusText );\n\t\t} else {\n\t\t\tvar result = JSON.parse( xhr.responseText );\n\t\t\tif( result.status ){\n\t\t\t\tdocument.getElementById(\"isedited-\"+currentId).innerHTML = \"изменен администратором...\";\n\t\t\t\tcurrentId = null;\n\t\t\t\tcurrentText.innerHTML = newText;\n\t\t\t\tcurrentText.parentNode.parentNode.style.display=\"block\";\n\t\t\t\tcurrentText.parentNode.parentNode.parentNode.lastChild.remove();\n\t\t\t\tcurrentText.parentNode.parentNode.parentNode.lastChild.style.display=\"block\";\n\t\t\t}\n\t\t}\n\t\tupdateCommentsProc = false;\n\t}\n}\n\nfunction disableEditTextBlock(){\n\tdocument.getElementById(\"newText\").disabled = true;\n\tdocument.getElementById(\"saveNewTextBtn\").disabled = true;\n\tdocument.getElementById(\"cancelNewTextBtn\").disabled = true;\n}\nfunction enableEditTextBlock(){\n\tdocument.getElementById(\"newText\").disabled = false;\n\tdocument.getElementById(\"saveNewTextBtn\").disabled = false;\n\tdocument.getElementById(\"cancelNewTextBtn\").disabled = false;\n}\n\n// функция получения данных из формы обратной связи\nfunction getFormData(){\n\tvar form = document.forms.feedback;\n\tvar comment = {\n\t\tname: form.elements.inputName.value,\n\t\temail: form.elements.inputEmail.value,\n\t\ttext: form.elements.inputText.value,\n\t\tinputFile: form.elements.inputFile.value\n\t}\n\treturn comment;\n}\n// функция очистки данных в форме обратной связи\nfunction clearFormData(){\n\tvar form = document.forms.feedback;\n\tform.elements.inputName.value = \"\";\n\tform.elements.inputEmail.value = \"\";\n\tform.elements.inputText.value = \"\";\n\tform.elements.inputFile.value = \"\";\n}\n\n// создаем preview html-блок используя шаблоны\nfunction preview(){\n\tif(!validate()){return;}\n\n\tdocument.getElementById(\"formGroupBtn\").parentNode.className = \"col-sm-12\";\n\tvar comment = getFormData();\n\tcomment.id = \"preview\";\n\tcomment.create_time = new Date().toLocaleString(\"ru\")\n\n\tvar preveiwComment = document.createElement(\"div\");\n\tpreveiwComment.className = \"panel panel-default\";\n\tpreveiwComment.setAttribute(\"id\", \"comment-preview\");\n\tvar commentTemplate = createCommentTemplate(comment);\n \tpreveiwComment.innerHTML = commentTemplate;\n\n \t// добавляем preview html-блок с комментарием на страницу\n\tdocument.getElementById(\"preview\").appendChild(preveiwComment);\n\n\t// добавляем в preview картинку (если есть)\n\tif(document.forms.feedback.inputFile.files[0] != undefined){\n\t\tvar thumb = document.createElement(\"img\");\n \t\tthumb.className = \"media-object\";\n \t\tthumb.src = document.getElementById(\"inputImage\").src;\n \t\tpreveiwComment.getElementsByTagName(\"a\")[0].appendChild(thumb);\n \t\tpreveiwComment.getElementsByTagName(\"a\")[0].parentNode.classList.add(\"border\");\n\t}\n\n\t//скрываем форму вода комментария\n\tdocument.getElementById(\"form-feedback\").style.display = \"none\";\n\tdocument.getElementById(\"previewBtn\").style.display = \"none\";\n\tdocument.getElementById(\"cancelPreviewBtn\").style.display = \"inline\";\n}\n\nfunction cancelPreview(){\n\tif(document.getElementById(\"comment-preview\")){\t\n\t\tdocument.getElementById(\"formGroupBtn\").parentNode.className = \"col-sm-8\";\n\n\t\tdocument.getElementById(\"form-feedback\").style.display = \"block\";\n\t\tdocument.getElementById(\"comment-preview\").remove();\n\t\tdocument.getElementById(\"previewBtn\").style.display = \"inline\";\n\t\tdocument.getElementById(\"cancelPreviewBtn\").style.display = \"none\";\n\t}\n\n}\n\n// Добавляем комментарий на сервер\nfunction addCommentRequest(){\n\tif(!validate()){return;}\n\tdocument.getElementById(\"addCommentBtn\").disabled = true;\n\tupdateCommentsProc = true;\t\n\t//\n\tvar file = document.forms.feedback.inputFile.files[0];\n\t//\n\tvar comment = getFormData();\n\tvar XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n\tvar xhr = new XHR();\n\txhr.withCredentials = true;\n\txhr.upload.onprogress = function(event) {\n\t\t// console.log(event.loaded + ' / ' + event.total);\n\t}\n\t//\n\txhr.open('POST', SERVER_URL+'api/comment', true);\n\tvar formData = new FormData();\n\t\tformData.append(\"image_file\", file);\t\n\t\tformData.append(\"name\", comment.name);\n\t\tformData.append(\"email\", comment.email);\n\t\tformData.append(\"text\", comment.text);\n\txhr.send(formData);\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4){\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.status != 200) {\n\t\t  console.error( xhr.status + ': ' + xhr.statusText );\n\t\t} else {\n\t\t\tvar result = JSON.parse( xhr.responseText );\n\t\t\tif( result.status ){\n\t\t\t\t//выводим info-block сообщение об успешном добавлении комментария\n\t\t\t\tdocument.getElementById(\"successInfoBlock\").style.display = \"block\";\n\t\t\t\t//очищаем форму обратнойсвязи\n\t\t\t\tclearFormData();\n\t\t\t\t//удаляем html-блок preview (если есть)\n\t\t\t\tcancelPreview();\n\t\t\t\t//удаляем картинку прикрепленную к форме обратной связи (если есть картинке)\n\t\t\t\tcancelImage();\n\t\t\t\t//если админ, то выведем только что отправленный комментарий\n\t\t\t\tif(user.isadmin){getCommentsRequest();}\n\t\t\t}\n\t\t}\n\t\tdocument.getElementById(\"addCommentBtn\").disabled = false;\n\t\tupdateCommentsProc = false;\n\t}\n}\n\n// функция получения данных из формы авторизации\nfunction getSigninFormData(){\n\tvar form = document.forms.signin;\n\tvar credential = {\n\t\tlogin: form.elements.inputSigninLogin.value,\n\t\tpassword: form.elements.inputSigninPassword.value\n\t}\n\treturn credential;\n}\n\n// авторизация\nfunction signIn(){\n\tvar credential = getSigninFormData();\n\tvar data = JSON.stringify(credential);\n\tvar XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n\tvar xhr = new XHR();\n\txhr.withCredentials = true;\n\txhr.open('POST', SERVER_URL+'api/signin', true);\n\txhr.send(data);\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4){\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.status != 200) {\n\t\t  console.error( xhr.status + ': ' + xhr.statusText );\n\t\t} else {\n\t\t\tvar result = JSON.parse( xhr.responseText );\n\t\t\tif( result.status ){\n\t\t\t\tuser.login = result.login;\n\t\t\t\tuser.session_id = result.session_id;\n\t\t\t\tdocument.cookie = \"userName=\"+user.login;\n\t\t\t\tshowHideAuthForm(user.login);\n\t\t\t\tgetCommentsRequest();\n\t\t\t}else{\n\t\t\t\talert(\"Неверный Логин или Пароль !\");\n\t\t\t}\n\t\t}\n\t}\n}\n\n// выход\nfunction signOut(){\n\tdocument.cookie = \"userName=\";\n\tvar XHR = (\"onload\" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;\n\tvar xhr = new XHR();\n\txhr.withCredentials = true;\n\txhr.open('GET', SERVER_URL+'api/signout', true);\n\txhr.send();\n\txhr.onreadystatechange = function() {\n\t\tif (xhr.readyState != 4){\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.status != 200) {\n\t\t  console.error( xhr.status + ': ' + xhr.statusText );\n\t\t} else {\n\t\t\tvar result = JSON.parse( xhr.responseText );\n\n\t\t\tif( result.status ){\n\t\t\t\t\n\t\t\t\tuser.login = \"\";\n\t\t\t\tuser.session_id = \"\";\n\t\t\t\tdocument.cookie = \"userName=\";\n\n\t\t\t\tshowHideAuthForm(user.login);\n\t\t\t\tgetCommentsRequest();\n\t\t\t}else{\n\t\t\t\talert(\"Ошибка.\");\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction showHideAuthForm(userName){\n\tif(userName != \"\"){\n\t\t//show form\n\t\tdocument.getElementById(\"userLogin\").innerHTML = user.login;\n\t\tdocument.getElementById(\"form-signin\").style.display = \"none\";\n\t\tdocument.getElementById(\"form-signout\").style.display = \"block\";\n\t}else{\n\t\t//hide form\n\t\tdocument.getElementById(\"userLogin\").innerHTML = user.login;\n\t\tdocument.getElementById(\"form-signin\").style.display = \"block\";\n\t\tdocument.getElementById(\"form-signout\").style.display = \"none\";\n\t}\n}\n\n/*\n\tValidate\n*/\nfunction removeErrorClass(el){\n\tel.parentNode.parentNode.className = \"form-group\";\n}\nfunction removeAllErrorClass(){\n\tvar elements = document.forms.feedback.getElementsByClassName(\"form-group\");\n\tfor (var i = elements.length - 1; i >= 0; i--) {\n\t\telements[i].className = \"form-group\";\n\t};\n}\n// validate() валидация полей ввода \nfunction validate(){\n\tremoveAllErrorClass();\n\n\tvar check = [];\n\t\tcheck['status'] = true;\n\n\tvar regex_name = /[a-zа-яё]+/i;\n\tvar regex_email = /\\S+@\\S+\\.\\S+/;\n\n\tvar comment = getFormData();\n\t\n\t//валидация name\n\tif(regex_name.exec(comment.name) == null){\n\t\tlet el = document.getElementById(\"inputName\");\n\t\tel.parentNode.parentNode.classList.add(\"has-error\");\n\t\tel.addEventListener(\"click\", function(){removeErrorClass(el)});\n\t\tcheck['status'] = false;\n\t}\n\t//валидация email\n\tif(regex_email.exec(comment.email) == null){\n\t\tlet el = document.getElementById(\"inputEmail\");\n\t\tel.parentNode.parentNode.classList.add(\"has-error\");\n\t\tel.addEventListener(\"click\", function(){removeErrorClass(el)});\n\t\tcheck['status'] = false;\n\t}\n\t//валидация на пустое сообщение (на пробелы)\n\tif(comment.text.replace(/\\s/g,'')==''){\n\t\tlet el = document.getElementById(\"inputText\");\n\t\tel.parentNode.parentNode.classList.add(\"has-error\");\n\t\tel.addEventListener(\"click\", function(){removeErrorClass(el)});\n\t\tcheck['status'] = false;\n\t}\n\n\tif(check['status']){\n\t\treturn true;\n\t}\t\n\treturn false;\n}\n\n\n/*\n\tUpload Image (320x240 .jpg .phg .gif)\n*/\n\nfunction getFile(){\n\tdocument.getElementById('inputFile').click();\n}\n\n// добавляем слушатель событий на элемент id == \"inputFile\",\n// когда пользователь выбрал файл, проиcходит его автоматическая загрузка через функцию upload()\ndocument.getElementById(\"inputFile\").addEventListener(\"change\", function(event) {\n    var file = document.forms.feedback.inputFile.files[0];\n\n    document.getElementById(\"inputImagePlaceholder\").style.display = \"none\";\n\tdocument.getElementById(\"cancelImageBtn\").style.display = \"inline\";\n\tdocument.getElementById(\"inputImage\").style.display = \"inline\";\n\n\tvar selectedFile = event.target.files[0];\n\tvar img = document.getElementById(\"inputImage\");\n\t\n\tvar reader = new FileReader();\n\treader.onload = function(event) {\n\t\timg.src = event.target.result;\n\t};\n\n\treader.readAsDataURL(selectedFile);\n}, false);\n\n\nfunction cancelImage(){\n\tdocument.getElementById(\"inputFile\").value = \"\";\n\tdocument.getElementById(\"inputImagePlaceholder\").style.display = \"table-cell\";\n\tdocument.getElementById(\"cancelImageBtn\").style.display = \"none\";\n\tdocument.getElementById(\"inputImage\").style.display = \"none\";\n\tdocument.getElementById(\"inputImage\").src = \"\";\n}\n\n/*\n\tSort Order\n*/\nfunction sortComments(el){\n\tCOMPARE_TYPE = getCompareType(el);\n\n\tvar chevron = document.getElementById(\"chevron\");\n\tif(el.id == chevron.parentNode.id){\n\t\tif(chevron.className == \"glyphicon glyphicon-chevron-up\"){\n\t\t\tchevron.className = \"glyphicon glyphicon-chevron-down\";\n\t\t\tcomments.sort(compareUp);\n\t\t}else{\n\t\t\tchevron.className = \"glyphicon glyphicon-chevron-up\";\n\t\t\tcomments.sort(compareDown);\n\t\t}\n\t}else{\n\t\tchevron.remove();\n\t\tvar chevron = document.createElement('span');\n\t\tchevron.className = \"glyphicon glyphicon-chevron-down\";\n\t\tchevron.setAttribute(\"id\", \"chevron\");\n\t\tel.appendChild(chevron);\n\t\tcomments.sort(compareUp);\t\t\n\t}\n\n\trenderAllComments(comments);\n}\nfunction getCompareType(el){\n\tvar type = \"\";\n\tif(el.id == \"colName\"){\n\t\ttype = \"name\";\n\t}\n\tif(el.id == \"colEmail\"){\n\t\ttype = \"email\";\n\t}\n\tif(el.id == \"colDate\"){\n\t\ttype = \"create_time\";\n\t}\n\treturn type;\n}\n// Функция сравнения UP\nfunction compareUp(a, b) {\n  if (a[COMPARE_TYPE] > b[COMPARE_TYPE]) {\n    return 1;\n  }\n  if (a[COMPARE_TYPE] < b[COMPARE_TYPE]) {\n    return -1;\n  }\n  return 0;\n}\n// Функция сравнения DOWN\nfunction compareDown(b, a) {\n  if (a[COMPARE_TYPE] > b[COMPARE_TYPE]) {\n    return 1;\n  }\n  if (a[COMPARE_TYPE] < b[COMPARE_TYPE]) {\n    return -1;\n  }\n  return 0;\n}\n"],"sourceRoot":"/source/"}